# Настройка cron на Хостинг Украина (adm.tools)

По [документации](https://www.ukraine.com.ua/ru/wiki/hosting/cron/): команда в задаче — не более 240 символов и не более 15 частей; при `cd` в самой команде возможна ошибка. Поэтому запускаем один .sh-скрипт.

## Шаг 1. Скрипт уже в репозитории

Файл `deploy/start-svitlobot-if-needed.sh` после деплоя лежит на сервере по пути:

```
/home/idesig02/helgamade.com/svitlobot/deploy/start-svitlobot-if-needed.sh
```

Один раз по SSH сделайте его исполняемым:

```bash
chmod +x /home/idesig02/helgamade.com/svitlobot/deploy/start-svitlobot-if-needed.sh
```

## Шаг 2. Задача в панели cron

1. Раздел **«Расписание задач (cron)»** → **«Добавить задачу»**.

2. **Задача** — только путь к скрипту (без лишних команд):
   ```
   /home/idesig02/helgamade.com/svitlobot/deploy/start-svitlobot-if-needed.sh
   ```
   Панель сама подставит `/usr/bin/sh` к .sh-файлам — галочку «запускать как есть» ставить не нужно.

3. **Одновременный запуск:** оставьте по умолчанию («Не запускать новый процесс, если предыдущий ещё работает») — скрипт сам не запустит второй процесс, если бот уже работает.

4. **Время запуска:** например **«Каждые 15 минут»** или **«Каждые 30 минут»** (минимальный интервал на хостинге — 1 минута; для «страховки» бота достаточно раз в 15–30 минут).

5. **Комментарий:** например `svitlobot watchdog`.

6. Сохраните задачу.

После сохранения можно нажать **▶️** и запустить задачу вручную для проверки. В логе cron не должно быть ошибок; бот при необходимости будет запущен и станет писать в `svitlobot.log`.

## Ограничения (из вики)

- Лимит времени выполнения задачи: 1 час (виртуальный хостинг).
- Минимальный интервал запуска: 1 минута.
- Cron не использует `PATH` — в скрипте уже используются полные пути (`/usr/bin/pgrep`, venv-`python`).
